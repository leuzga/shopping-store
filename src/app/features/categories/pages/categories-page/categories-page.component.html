<div class="categories-container" [class.fade-in]="isVisible()">
  <div class="masonry-grid">
    @for (category of categorySections(); track category.categorySlug) {
      @switch (getCardSize(category.categorySlug)) {
        @case (0) {
          <!-- Wide (aspect 1.2-1.4): 2x1 for tablets, shirts, shoes, anteojos, etc. -->
          <div
            class="masonry-card col-span-2"
            (click)="navigateToCategory(category.categorySlug, category.categoryName)">
            <div class="card-image-wrapper">
              <img
                [src]="getCategoryImage(category.categorySlug)"
                [alt]="category.categoryName"
                [attr.data-category]="category.categorySlug"
                class="card-image">
            </div>
            <div class="card-overlay"></div>
            <div class="card-content">
              <h3 class="card-title">{{ category.categoryName }}</h3>
            </div>
          </div>
        }
        @case (1) {
          <!-- Square (aspect 0.9-1.2): 1x1 for watches, jewelry, bags, etc. -->
          <div
            class="masonry-card col-span-1"
            (click)="navigateToCategory(category.categorySlug, category.categoryName)">
            <div class="card-image-wrapper">
              <img
                [src]="getCategoryImage(category.categorySlug)"
                [alt]="category.categoryName"
                [attr.data-category]="category.categorySlug"
                class="card-image">
            </div>
            <div class="card-overlay"></div>
            <div class="card-content">
              <h3 class="card-title">{{ category.categoryName }}</h3>
            </div>
          </div>
        }
        @case (2) {
          <!-- Tall (aspect < 0.9): 1x2 for dresses, phones, vertical items -->
          <div
            class="masonry-card col-span-1 row-span-2"
            (click)="navigateToCategory(category.categorySlug, category.categoryName)">
            <div class="card-image-wrapper">
              <img
                [src]="getCategoryImage(category.categorySlug)"
                [alt]="category.categoryName"
                [attr.data-category]="category.categorySlug"
                class="card-image">
            </div>
            <div class="card-overlay"></div>
            <div class="card-content">
              <h3 class="card-title">{{ category.categoryName }}</h3>
            </div>
          </div>
        }
        @case (3) {
          <!-- Extra Wide (aspect > 1.4): 2x2 for laptops, beds, motorcycles, etc. -->
          <div
            class="masonry-card col-span-2 row-span-2"
            (click)="navigateToCategory(category.categorySlug, category.categoryName)">
            <div class="card-image-wrapper">
              <img
                [src]="getCategoryImage(category.categorySlug)"
                [alt]="category.categoryName"
                [attr.data-category]="category.categorySlug"
                class="card-image">
            </div>
            <div class="card-overlay"></div>
            <div class="card-content">
              <h3 class="card-title">{{ category.categoryName }}</h3>
            </div>
          </div>
        }
        @default {
          <!-- Fallback: 1x1 square (aspect ratio detection default) -->
          <div
            class="masonry-card col-span-1"
            (click)="navigateToCategory(category.categorySlug, category.categoryName)">
            <div class="card-image-wrapper">
              <img
                [src]="getCategoryImage(category.categorySlug)"
                [alt]="category.categoryName"
                [attr.data-category]="category.categorySlug"
                class="card-image">
            </div>
            <div class="card-overlay"></div>
            <div class="card-content">
              <h3 class="card-title">{{ category.categoryName }}</h3>
            </div>
          </div>
        }
      }
    }
  </div>

  <!-- Empty state -->
  @if (categorySections().length === 0) {
    <div class="empty-state">
      <p>No categories available</p>
    </div>
  }
</div>
