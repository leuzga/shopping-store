<div class="cart-item">
  <!-- Product Image -->
  <div class="item-image">
    <img [src]="item().image" [alt]="item().title" />
  </div>

  <!-- Item Details -->
  <div class="item-details">
    <h3 class="item-title">{{ item().title }}</h3>
    <!-- Show price with or without discount -->
    @if ((item().discountPercentage ?? 0) > 0) {
      <div class="price-with-discount">
        <p class="original-price">{{ item().price | currency }}</p>
        <span class="discount-badge-small">{{ (item().discountPercentage ?? 0) | number:'1.0-0' }}%</span>
        <p class="item-price-discounted">{{ getDiscountedPrice(item()) | currency }}</p>
      </div>
    } @else {
      <p class="item-price">{{ item().price | currency }}</p>
    }
  </div>

  <!-- Quantity Controls -->
  <div class="quantity-controls">
    <button
      class="quantity-btn"
      (click)="decrementQuantity()"
      [attr.aria-label]="messages.ACTIONS.DECREMENT">
      −
    </button>
    <span class="quantity-value">{{ item().quantity }}</span>
    <button
      class="quantity-btn"
      (click)="incrementQuantity()"
      [attr.aria-label]="messages.ACTIONS.INCREMENT">
      +
    </button>
  </div>

  <!-- Subtotal -->
  <div class="item-subtotal" [class.discounted]="(item().discountPercentage ?? 0) > 0">
    {{ (getDiscountedPrice(item()) * item().quantity) | currency }}
  </div>

  <!-- Remove Button -->
  <button
    class="remove-btn"
    (click)="removeFromCart()"
    [attr.aria-label]="messages.ACTIONS.REMOVE_ITEM">
    ✕
  </button>
</div>
